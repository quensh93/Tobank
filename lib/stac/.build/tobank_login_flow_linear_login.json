{
  "type": "stateFull",
  "onInit": {
    "actionType": "setValue",
    "key": "isFormValid",
    "value": false
  },
  "child": {
    "appBar": {
      "title": {
        "data": "{{appStrings.login.validationTitle}}",
        "style": {
          "type": "alias",
          "value": "{{appStyles.appbarStyle}}"
        },
        "textDirection": "rtl",
        "type": "text"
      },
      "centerTitle": true,
      "type": "appBar"
    },
    "body": {
      "autovalidateMode": "onUserInteraction",
      "child": {
        "crossAxisAlignment": "stretch",
        "textDirection": "rtl",
        "children": [
          {
            "child": {
              "padding": {
                "left": 16.0,
                "top": 16.0,
                "right": 16.0,
                "bottom": 16.0
              },
              "child": {
                "crossAxisAlignment": "stretch",
                "textDirection": "rtl",
                "children": [
                  {
                    "data": "{{appStrings.login.validationTitle}}",
                    "style": {
                      "type": "alias",
                      "value": "{{appStyles.text.pageTitle}}"
                    },
                    "textDirection": "rtl",
                    "type": "text"
                  },
                  {
                    "height": 16.0,
                    "type": "sizedBox"
                  },
                  {
                    "data": "{{appStrings.login.validationInstructions}}",
                    "style": {
                      "type": "alias",
                      "value": "{{appStyles.text.subtitle}}"
                    },
                    "textDirection": "rtl",
                    "type": "text"
                  },
                  {
                    "height": 16.0,
                    "type": "sizedBox"
                  },
                  {
                    "crossAxisAlignment": "stretch",
                    "textDirection": "rtl",
                    "children": [
                      {
                        "data": "{{appStrings.login.mobileNumberLabel}}",
                        "style": {
                          "type": "alias",
                          "value": "{{appStyles.text.label}}"
                        },
                        "textDirection": "rtl",
                        "type": "text"
                      },
                      {
                        "height": 8.0,
                        "type": "sizedBox"
                      },
                      {
                        "type": "textFormField",
                        "id": "mobile_number",
                        "textDirection": "rtl",
                        "textAlign": "right",
                        "maxLength": 11,
                        "inputFormatters": [
                          {
                            "type": "allow",
                            "rule": "[0-9]"
                          }
                        ],
                        "decoration": {
                          "hintText": "{{appStrings.login.mobileNumberPlaceholder}}",
                          "hintStyle": {
                            "type": "custom",
                            "color": "{{appStyles.input.login.hintStyleColor}}",
                            "fontSize": 14.0,
                            "fontWeight": "w500"
                          },
                          "contentPadding": {
                            "left": 20.0,
                            "top": 16.0,
                            "right": 20.0,
                            "bottom": 16.0
                          },
                          "filled": false,
                          "fillColor": "{{appStyles.input.login.fillColor}}"
                        },
                        "keyboardType": "number",
                        "textInputAction": "next",
                        "style": {
                          "type": "custom",
                          "color": "{{appStyles.input.login.textStyleColor}}",
                          "fontSize": 16.0,
                          "fontWeight": "w600"
                        },
                        "validatorRules": [
                          {
                            "rule": "^09\\d{9}$",
                            "message": "{{appStrings.login.mobileNumberError}}"
                          }
                        ],
                        "onChanged": {
                          "actionType": "validateFields",
                          "resultKey": "isFormValid",
                          "fields": [
                            {
                              "id": "mobile_number",
                              "rule": "^09\\d{9}$"
                            },
                            {
                              "id": "national_code",
                              "rule": "^\\d{10}$"
                            },
                            {
                              "id": "birthdate",
                              "rule": "^\\d{4}/\\d{2}/\\d{2}$"
                            }
                          ]
                        }
                      },
                      {
                        "height": 16.0,
                        "type": "sizedBox"
                      },
                      {
                        "data": "{{appStrings.login.nationalCodeTitle}}",
                        "style": {
                          "type": "alias",
                          "value": "{{appStyles.text.label}}"
                        },
                        "textDirection": "rtl",
                        "type": "text"
                      },
                      {
                        "height": 8.0,
                        "type": "sizedBox"
                      },
                      {
                        "type": "textFormField",
                        "id": "national_code",
                        "textDirection": "rtl",
                        "textAlign": "right",
                        "maxLength": 10,
                        "inputFormatters": [
                          {
                            "type": "allow",
                            "rule": "[0-9]"
                          }
                        ],
                        "decoration": {
                          "hintText": "{{appStrings.login.nationalCodePlaceholder}}",
                          "hintStyle": {
                            "type": "custom",
                            "color": "{{appStyles.input.login.hintStyleColor}}",
                            "fontSize": 14.0,
                            "fontWeight": "w500"
                          },
                          "contentPadding": {
                            "left": 20.0,
                            "top": 16.0,
                            "right": 20.0,
                            "bottom": 16.0
                          },
                          "filled": false,
                          "fillColor": "{{appStyles.input.login.fillColor}}"
                        },
                        "keyboardType": "number",
                        "textInputAction": "done",
                        "style": {
                          "type": "custom",
                          "color": "{{appStyles.input.login.textStyleColor}}",
                          "fontSize": 16.0,
                          "fontWeight": "w600"
                        },
                        "validatorRules": [
                          {
                            "rule": "^\\d{10}$",
                            "message": "{{appStrings.login.nationalCodeError}}"
                          }
                        ],
                        "onChanged": {
                          "actionType": "validateFields",
                          "resultKey": "isFormValid",
                          "fields": [
                            {
                              "id": "mobile_number",
                              "rule": "^09\\d{9}$"
                            },
                            {
                              "id": "national_code",
                              "rule": "^\\d{10}$"
                            },
                            {
                              "id": "birthdate",
                              "rule": "^\\d{4}/\\d{2}/\\d{2}$"
                            }
                          ]
                        }
                      },
                      {
                        "height": 16.0,
                        "type": "sizedBox"
                      },
                      {
                        "data": "{{appStrings.login.birthdateLabel}}",
                        "style": {
                          "type": "alias",
                          "value": "{{appStyles.text.label}}"
                        },
                        "textDirection": "rtl",
                        "type": "text"
                      },
                      {
                        "height": 8.0,
                        "type": "sizedBox"
                      },
                      {
                        "child": {
                          "id": "birthdate",
                          "decoration": {
                            "hintText": "{{appStrings.login.birthdatePlaceholder}}",
                            "hintStyle": {
                              "type": "custom",
                              "color": "{{appStyles.input.loginDatePicker.hintStyleColor}}",
                              "fontSize": 14.0,
                              "fontWeight": "w500"
                            },
                            "prefixIcon": {
                              "padding": {
                                "left": 8.0,
                                "top": 8.0,
                                "right": 8.0,
                                "bottom": 8.0
                              },
                              "child": {
                                "src": "assets/icons/ic_calendar.svg",
                                "imageType": "asset",
                                "color": "{{appStyles.input.loginDatePicker.suffixIconColor}}",
                                "width": 24.0,
                                "height": 24.0,
                                "fit": "scaleDown",
                                "type": "image"
                              },
                              "type": "padding"
                            },
                            "contentPadding": {
                              "left": 16.0,
                              "top": 16.0,
                              "right": 16.0,
                              "bottom": 16.0
                            },
                            "filled": false,
                            "fillColor": "{{appStyles.input.loginDatePicker.fillColor}}"
                          },
                          "keyboardType": "text",
                          "style": {
                            "type": "custom",
                            "color": "{{appStyles.input.loginDatePicker.textStyleColor}}",
                            "fontSize": 16.0,
                            "fontWeight": "w600"
                          },
                          "textAlign": "right",
                          "textDirection": "rtl",
                          "readOnly": true,
                          "enabled": false,
                          "validatorRules": [
                            {
                              "rule": "^\\d{4}/\\d{2}/\\d{2}$",
                              "message": "{{appStrings.login.birthdateError}}"
                            }
                          ],
                          "type": "textFormField"
                        },
                        "onTap": {
                          "actionType": "persianDatePicker",
                          "formFieldId": "birthdate",
                          "firstDate": "1350/01/01",
                          "lastDate": "1450/12/29",
                          "onDateSelected": {
                            "actionType": "validateFields",
                            "resultKey": "isFormValid",
                            "fields": [
                              {
                                "id": "mobile_number",
                                "rule": "^09\\d{9}$"
                              },
                              {
                                "id": "national_code",
                                "rule": "^\\d{10}$"
                              },
                              {
                                "id": "birthdate",
                                "rule": "^\\d{4}/\\d{2}/\\d{2}$"
                              }
                            ]
                          }
                        },
                        "type": "gestureDetector"
                      },
                      {
                        "height": 24.0,
                        "type": "sizedBox"
                      },
                      {
                        "mainAxisAlignment": "center",
                        "textDirection": "rtl",
                        "children": [
                          {
                            "data": "{{appStrings.login.agreeWithRulesMessage}}",
                            "style": {
                              "type": "alias",
                              "value": "{{appStyles.text.agreementRegular}}"
                            },
                            "textDirection": "rtl",
                            "type": "text"
                          },
                          {
                            "onPressed": {
                              "request": {
                                "url": "https://api.tobank.com/screens/tobank_rules",
                                "method": "get",
                                "actionType": "networkRequest"
                              },
                              "navigationStyle": "push",
                              "actionType": "navigate"
                            },
                            "style": {
                              "foregroundColor": "{{appColors.current.secondary.color}}"
                            },
                            "child": {
                              "data": "{{appStrings.login.rulesAndRegulations}}",
                              "style": {
                                "type": "alias",
                                "value": "{{appStyles.text.agreementLink}}"
                              },
                              "textDirection": "rtl",
                              "type": "text"
                            },
                            "type": "textButton"
                          },
                          {
                            "data": "{{appStrings.login.agreeSuffix}}",
                            "style": {
                              "type": "alias",
                              "value": "{{appStyles.text.agreementRegular}}"
                            },
                            "textDirection": "rtl",
                            "type": "text"
                          }
                        ],
                        "type": "row"
                      }
                    ],
                    "type": "column"
                  }
                ],
                "type": "column"
              },
              "type": "singleChildScrollView"
            },
            "type": "expanded"
          },
          {
            "padding": {
              "left": 16.0,
              "top": 16.0,
              "right": 16.0,
              "bottom": 16.0
            },
            "child": {
              "type": "reactiveElevatedButton",
              "enabledKey": "isFormValid",
              "enabled": false,
              "onPressed": {
                "values": [
                  {
                    "key": "form.mobile_number",
                    "value": {
                      "id": "mobile_number",
                      "actionType": "getFormValue"
                    }
                  },
                  {
                    "key": "form.national_code",
                    "value": {
                      "id": "national_code",
                      "actionType": "getFormValue"
                    }
                  },
                  {
                    "key": "form.birthdate",
                    "value": {
                      "id": "birthdate",
                      "actionType": "getFormValue"
                    }
                  },
                  {
                    "key": "appData.mobile_number",
                    "value": {
                      "id": "mobile_number",
                      "actionType": "getFormValue"
                    }
                  }
                ],
                "action": {
                  "url": "https://api.tobank.com/verify-identity",
                  "method": "post",
                  "contentType": "application/json",
                  "body": {
                    "mobile_number": {
                      "id": "mobile_number",
                      "actionType": "getFormValue"
                    },
                    "national_code": {
                      "id": "national_code",
                      "actionType": "getFormValue"
                    },
                    "birthdate": {
                      "id": "birthdate",
                      "actionType": "getFormValue"
                    }
                  },
                  "results": [
                    {
                      "statusCode": 200,
                      "action": {
                        "widget": {
                          "type": "alertDialog",
                          "title": {
                            "type": "text",
                            "data": "{{appStrings.login.dialogRequestResultTitle}}",
                            "textDirection": "rtl",
                            "style": {
                              "type": "custom",
                              "fontSize": 18.0,
                              "fontWeight": "w700",
                              "color": "{{appColors.current.text.title}}"
                            }
                          },
                          "content": {
                            "type": "singleChildScrollView",
                            "child": {
                              "type": "column",
                              "crossAxisAlignment": "stretch",
                              "textDirection": "rtl",
                              "mainAxisSize": "min",
                              "children": [
                                {
                                  "type": "text",
                                  "data": "{{appStrings.login.dialogRequestSentLabel}}",
                                  "textDirection": "rtl",
                                  "style": {
                                    "type": "custom",
                                    "fontSize": 14.0,
                                    "fontWeight": "w600",
                                    "color": "{{appColors.current.text.title}}"
                                  }
                                },
                                {
                                  "type": "sizedBox",
                                  "height": 8
                                },
                                {
                                  "type": "text",
                                  "data": "URL: https://api.tobank.com/verify-identity\nMethod: POST\n\nBody:\n{\n  \"mobile_number\": \"{{form.mobile_number}}\",\n  \"national_code\": \"{{form.national_code}}\",\n  \"birthdate\": \"{{form.birthdate}}\"\n}",
                                  "textDirection": "ltr",
                                  "style": {
                                    "type": "custom",
                                    "fontSize": 11.0,
                                    "fontFamily": "monospace",
                                    "color": "{{appColors.current.text.title}}"
                                  }
                                },
                                {
                                  "type": "sizedBox",
                                  "height": 16
                                },
                                {
                                  "type": "text",
                                  "data": "{{appStrings.login.dialogResponseReceivedLabel}}",
                                  "textDirection": "rtl",
                                  "style": {
                                    "type": "custom",
                                    "fontSize": 14.0,
                                    "fontWeight": "w600",
                                    "color": "{{appColors.current.text.title}}"
                                  }
                                },
                                {
                                  "type": "sizedBox",
                                  "height": 8
                                },
                                {
                                  "type": "text",
                                  "data": "Status: 200 OK\n\nResponse:\n{\n  \"success\": true,\n  \"message\": \"Ú©Ø¯ ØªØ§ÛŒÛŒØ¯ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯\",\n  \"otpCode\": \"123456\",\n  \"expiresIn\": 120\n}",
                                  "textDirection": "ltr",
                                  "style": {
                                    "type": "custom",
                                    "fontSize": 11.0,
                                    "fontFamily": "monospace",
                                    "color": "{{appColors.current.text.title}}"
                                  }
                                }
                              ]
                            }
                          },
                          "actions": [
                            {
                              "type": "textButton",
                              "child": {
                                "type": "text",
                                "data": "{{appStrings.login.dialogConfirmButton}}",
                                "textDirection": "rtl"
                              },
                              "onPressed": {
                                "actionType": "closeDialog"
                              }
                            },
                            {
                              "type": "filledButton",
                              "style": {
                                "backgroundColor": "{{appColors.current.primary.color}}",
                                "foregroundColor": "{{appColors.current.primary.onPrimary}}",
                                "padding": {
                                  "left": 24,
                                  "right": 24,
                                  "top": 8,
                                  "bottom": 8
                                },
                                "shape": {
                                  "type": "roundedRectangle",
                                  "borderRadius": {
                                    "topLeft": 8,
                                    "topRight": 8,
                                    "bottomLeft": 8,
                                    "bottomRight": 8
                                  }
                                }
                              },
                              "child": {
                                "type": "text",
                                "data": "Ø§Ø¯Ø§Ù…Ù‡",
                                "textDirection": "rtl",
                                "style": {
                                  "type": "custom",
                                  "color": "{{appColors.current.primary.onPrimary}}",
                                  "fontWeight": "w600"
                                }
                              },
                              "onPressed": {
                                "actionType": "multiAction",
                                "actions": [
                                  {
                                    "actionType": "closeDialog"
                                  },
                                  {
                                    "actionType": "navigate",
                                    "widgetType": "tobank_login_flow_linear_verify_otp",
                                    "navigationStyle": "pushReplacement"
                                  }
                                ]
                              }
                            }
                          ]
                        },
                        "actionType": "showDialog"
                      }
                    }
                  ],
                  "actionType": "networkRequest"
                },
                "actionType": "setValue"
              },
              "style": {
                "backgroundColor": "{{appStyles.button.primary.backgroundColor}}",
                "elevation": 0.0,
                "textStyle": {
                  "type": "custom",
                  "color": "{{appStyles.button.primary.textStyleColor}}",
                  "fontSize": 16.0,
                  "fontWeight": "w600"
                },
                "padding": {
                  "top": 8.0,
                  "bottom": 8.0
                },
                "fixedSize": {
                  "width": 999999.0,
                  "height": 56.0
                },
                "shape": {
                  "type": "roundedRectangleBorder",
                  "borderRadius": {
                    "topLeft": 10.0,
                    "topRight": 10.0,
                    "bottomLeft": 10.0,
                    "bottomRight": 10.0
                  }
                }
              },
              "child": {
                "data": "{{appStrings.login.receiveVerificationCode}}",
                "style": {
                  "type": "custom",
                  "color": "{{appStyles.button.primary.textStyleColor}}",
                  "fontSize": 16.0,
                  "fontWeight": "w600"
                },
                "textDirection": "rtl",
                "type": "text"
              }
            },
            "type": "padding"
          },
          {
            "height": 24.0,
            "type": "sizedBox"
          }
        ],
        "type": "column"
      },
      "type": "form"
    },
    "type": "scaffold"
  }
}